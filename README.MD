# ğŸŒ¿ Propre Eco Assistant

> Application web progressive (PWA) de gestion du personnel et des chantiers pour Propre Eco

[![Made with Love](https://img.shields.io/badge/Made%20with-â¤ï¸-red.svg)](https://github.com)
[![PWA Ready](https://img.shields.io/badge/PWA-Ready-success.svg)](https://web.dev/progressive-web-apps/)
[![Mobile First](https://img.shields.io/badge/Mobile-First-blue.svg)](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps)

---

## ğŸ“‹ Table des matiÃ¨res

- [Vue d'ensemble](#-vue-densemble)
- [FonctionnalitÃ©s](#-fonctionnalitÃ©s)
- [Pages et modules](#-pages-et-modules)
- [Technologies](#-technologies)
- [Installation](#-installation)
- [Utilisation](#-utilisation)
- [Architecture](#-architecture)
- [SÃ©curitÃ©](#-sÃ©curitÃ©)
- [Contribution](#-contribution)

---

## ğŸ¯ Vue d'ensemble

**Propre Eco Assistant** est une application web complÃ¨te dÃ©veloppÃ©e pour gÃ©rer les opÃ©rations quotidiennes d'une entreprise de nettoyage professionnel. L'application offre une interface moderne et intuitive pour :

- âœ… Gestion des heures de travail
- âœ… Suivi des chantiers spÃ©cifiques
- âœ… GÃ©nÃ©ration de feuilles de prÃ©sence
- âœ… Signalement de problÃ¨mes
- âœ… Galerie photos des chantiers
- âœ… Tableau de bord administratif
- âœ… SystÃ¨me de pointeuse avec badges employÃ©s

### ğŸ¨ Design
- Interface moderne avec **glassmorphism**
- DÃ©gradÃ©s verts (thÃ¨me Propre Eco)
- **100% responsive** - optimisÃ© mobile et desktop
- Animations fluides et transitions Ã©lÃ©gantes
- UX soignÃ©e avec feedback utilisateur constant

---

## âš¡ FonctionnalitÃ©s

### ğŸ” Authentification et SÃ©curitÃ©
- **SystÃ¨me de badges employÃ©s** avec codes PIN Ã  4 chiffres
- **Connexion automatique** pour profils favoris (30 jours)
- Stockage sÃ©curisÃ© des sessions dans localStorage
- DÃ©connexion manuelle disponible

### â° Gestion des Heures
- **Saisie hebdomadaire** avec incrÃ©ments de 0.25h (1h, 1h25, 1h50, 1h75)
- Calcul automatique des totaux
- Suivi du kilomÃ©trage
- Commentaires par jour
- Sauvegarde dans Firebase Firestore

### ğŸ—ï¸ Chantiers SpÃ©cifiques
- Tableau avec : Date, Chantier, Nb employÃ©s, Equipe, Total
- Saisie manuelle du total d'heures
- Ajout/suppression de lignes dynamique
- Calcul du total global automatique

### ğŸ“¸ Galerie Photos
- Upload de photos par chantier
- **Modal carrousel moderne** :
  - Plein Ã©cran avec fond noir
  - Navigation clavier (â† â†’ Ã‰chap)
  - Compteur de photos
  - Informations en overlay
  - Bouton fermeture rouge bien visible
- **Filtres avancÃ©s** :
  - Par chantier
  - Par description âœ¨ **NOUVEAU**
  - Par agent
  - Par date
- TÃ©lÃ©chargement en ZIP
- Suppression groupÃ©e

### ğŸ“Š Tableau de Bord Admin
- AccÃ¨s protÃ©gÃ© par code
- Vue d'ensemble des signalements
- Gestion des photos de chantiers
- Statistiques en temps rÃ©el
- Export des donnÃ©es

### ğŸ“„ GÃ©nÃ©ration de Feuilles
- **Feuilles de prÃ©sence** automatiques
- **Feuilles hebdomadaires** personnalisÃ©es
- Export et impression optimisÃ©s
- Templates professionnels

### ğŸš¨ Signalements
- Formulaire de signalement de problÃ¨mes
- Upload de photos d'illustration
- Suivi des incidents
- Notifications

---

## ğŸ“± Pages et Modules

### 1. `index.html` - Page d'accueil
- Portail principal de l'application
- Navigation vers tous les modules
- Design accueillant et moderne

### 2. `pointeuse.html` - SystÃ¨me de badges
- Cartes employÃ©s avec avatars colorÃ©s
- **SystÃ¨me de favoris** avec Ã©toiles
- **Connexion automatique** si favori + code correct
- Modal de saisie du code PIN
- Redirection vers heures ou feuilles Google Sheets

### 3. `heures.html` - Gestion des heures
- **Tableau hebdomadaire** (Lun-Dim)
- **Tableau chantiers spÃ©cifiques** responsive
  - Mode carte sur mobile avec labels auto
  - Bouton supprimer agrandi pour mobile
- SÃ©lecteur de semaine
- **Messages d'alerte** : "Pensez Ã  cliquer sur Enregistrer !"
- Sauvegarde Firebase en temps rÃ©el
- **Bouton dÃ©connexion** (si session auto active)

### 4. `dashbord.html` - Tableau de bord
- AccÃ¨s sÃ©curisÃ© par code
- Section signalements
- Section photos chantiers avec **filtre description**
- **Modal carrousel refonte** :
  - Navigation fluide
  - Support clavier complet
  - Design moderne plein Ã©cran
- Actions groupÃ©es (tÃ©lÃ©chargement, suppression)
- Pagination intelligente

### 5. `Feuilles.html` - Gestion des feuilles
- GÃ©nÃ©ration automatique de feuilles
- Templates personnalisables
- Export multi-formats

### 6. `Generateur_feuilles.html` - GÃ©nÃ©rateur
- Outil de crÃ©ation de feuilles
- Interface intuitive
- ParamÃ¨tres personnalisables

### 7. `Specifique.html` - Chantiers spÃ©cifiques
- Gestion dÃ©taillÃ©e des chantiers
- Upload photos par chantier
- Descriptions et dÃ©tails

### 8. `signaler.html` - Signalements
- Formulaire de dÃ©claration
- Upload de photos
- CatÃ©gorisation des problÃ¨mes

### 9. `voir.html` - Visualisation
- Consultation des donnÃ©es
- Filtres et recherche
- Export des informations

---

## ğŸ› ï¸ Technologies

### Frontend
- **HTML5** - Structure sÃ©mantique
- **CSS3** - Styles modernes
  - Variables CSS
  - Flexbox & Grid
  - Animations & Transitions
  - Media Queries (responsive)
  - Glassmorphism
- **JavaScript ES6+** - Logique applicative
  - Fetch API
  - LocalStorage
  - Promises & Async/Await
  - Event Listeners

### Backend & Database
- **Firebase** - Backend as a Service
  - **Firestore** - Base de donnÃ©es NoSQL
  - **Storage** - HÃ©bergement photos
  - **Authentication** (prÃ©vu)
  - **Hosting** - DÃ©ploiement

### Services Externes
- **ImgBB** - CDN pour images
- **Font Awesome 6.4** - IcÃ´nes
- **Google Fonts** (Inter) - Typographie

### PWA
- **Service Worker** - Fonctionnement offline
- **Web App Manifest** - Installation sur mobile
- **Cache API** - Performance optimale

---

## ğŸ“¦ Installation

### PrÃ©requis
- Navigateur web moderne (Chrome, Firefox, Safari, Edge)
- Connexion internet (premiÃ¨re visite)
- Firebase configurÃ© (voir configuration)

### Configuration Firebase

1. CrÃ©er un projet sur [Firebase Console](https://console.firebase.google.com/)

2. Ajouter les clÃ©s dans les fichiers :

```javascript
const firebaseConfig = {
    apiKey: "VOTRE_API_KEY",
    authDomain: "VOTRE_AUTH_DOMAIN",
    projectId: "VOTRE_PROJECT_ID",
    storageBucket: "VOTRE_STORAGE_BUCKET",
    messagingSenderId: "VOTRE_MESSAGING_ID",
    appId: "VOTRE_APP_ID",
    measurementId: "VOTRE_MEASUREMENT_ID"
};
```

3. Activer Firestore et Storage dans la console Firebase

4. Configurer les rÃ¨gles de sÃ©curitÃ© :

```javascript
// Firestore Rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true; // Ã€ personnaliser selon vos besoins
    }
  }
}
```

### DÃ©ploiement

#### Option 1 : HÃ©bergement Firebase
```bash
npm install -g firebase-tools
firebase login
firebase init
firebase deploy
```

#### Option 2 : Serveur Web classique
1. Copier tous les fichiers sur votre serveur
2. S'assurer que le service worker fonctionne (HTTPS requis)
3. Configurer le fichier `.htaccess` si nÃ©cessaire

---

## ğŸš€ Utilisation

### Premier lancement

1. **AccÃ©der Ã  l'application**
   - Ouvrir `index.html` dans un navigateur
   - Ou accÃ©der via l'URL de dÃ©ploiement

2. **Installation PWA (mobile)**
   - Sur iOS : Safari > Partager > "Sur l'Ã©cran d'accueil"
   - Sur Android : Chrome > Menu > "Installer l'application"

### Flux utilisateur classique

#### EmployÃ©
1. Ouvrir l'app via l'icÃ´ne
2. Navigation automatique si favori configurÃ©
3. Ou cliquer sur badge â†’ entrer code PIN
4. Remplir les heures de la semaine
5. Ajouter chantiers spÃ©cifiques si besoin
6. Cliquer sur "Enregistrer"

#### Administrateur
1. AccÃ©der au tableau de bord
2. Entrer le code admin
3. Consulter signalements et photos
4. Filtrer par critÃ¨res (chantier, description, agent, date)
5. TÃ©lÃ©charger ou supprimer selon besoin

---

## ğŸ—ï¸ Architecture

### Structure des fichiers
```
propre-eco-assistant/
â”‚
â”œâ”€â”€ index.html                 # Page d'accueil
â”œâ”€â”€ pointeuse.html             # SystÃ¨me de badges
â”œâ”€â”€ heures.html                # Gestion heures
â”œâ”€â”€ dashbord.html              # Tableau de bord admin
â”œâ”€â”€ Feuilles.html              # Gestion feuilles
â”œâ”€â”€ Generateur_feuilles.html   # GÃ©nÃ©rateur
â”œâ”€â”€ Specifique.html            # Chantiers spÃ©cifiques
â”œâ”€â”€ signaler.html              # Signalements
â”œâ”€â”€ voir.html                  # Visualisation
â”‚
â”œâ”€â”€ styles.css                 # Styles globaux
â”œâ”€â”€ app.js                     # Logique principale
â”œâ”€â”€ badge.js                   # SystÃ¨me badges
â”‚
â”œâ”€â”€ manifest.json              # PWA manifest
â”œâ”€â”€ service-worker.js          # Service worker
â”‚
â”œâ”€â”€ img/                       # Images et logos
â”‚   â””â”€â”€ logo.png
â”‚
â””â”€â”€ README.md                  # Ce fichier
```

### Structure Firebase

```
Firestore Collections:
â”‚
â”œâ”€â”€ employees/                 # Collection employÃ©s
â”‚   â”œâ”€â”€ {employeeId}/
â”‚   â”‚   â”œâ”€â”€ weeks/            # Sous-collection semaines
â”‚   â”‚   â”‚   â””â”€â”€ {weekId}/     # Document par semaine
â”‚   â”‚   â”‚       â”œâ”€â”€ days[]    # Tableau jours
â”‚   â”‚   â”‚       â””â”€â”€ kilometrage
â”‚   â”‚   â””â”€â”€ projects/         # Sous-collection projets
â”‚   â”‚       â””â”€â”€ data/         # Document projets
â”‚   â”‚           â””â”€â”€ data[]    # Tableau chantiers
â”‚
â”œâ”€â”€ photos_chantiers/         # Collection photos
â”‚   â””â”€â”€ {photoId}/
â”‚       â”œâ”€â”€ chantier
â”‚       â”œâ”€â”€ description
â”‚       â”œâ”€â”€ agent
â”‚       â”œâ”€â”€ photos[]
â”‚       â””â”€â”€ createdAt
â”‚
â””â”€â”€ signalements/             # Collection signalements
    â””â”€â”€ {signalementId}/
        â”œâ”€â”€ type
        â”œâ”€â”€ description
        â”œâ”€â”€ photos[]
        â””â”€â”€ createdAt
```

### LocalStorage

```javascript
// ClÃ©s utilisÃ©es
{
  "favoriteEmployee": "Dylan",           // EmployÃ© favori
  "savedEmployeeSession": {              // Session auto-login
    "employeeId": "dylan",
    "employeeName": "Dylan",
    "timestamp": 1732562400000
  }
}
```

---

## ğŸ”’ SÃ©curitÃ©

### Authentification
- Codes PIN Ã  4 chiffres par employÃ©
- Code admin pour tableau de bord
- Sessions avec expiration (30 jours)
- Aucun mot de passe stockÃ© en clair

### DonnÃ©es
- Firebase Security Rules configurables
- Validation cÃ´tÃ© client et serveur
- Chiffrement des communications (HTTPS)
- LocalStorage pour sessions uniquement

### Bonnes pratiques
- âœ… Ne pas activer connexion auto sur appareils partagÃ©s
- âœ… DÃ©connexion manuelle disponible
- âœ… Expiration automatique des sessions
- âœ… Codes PIN personnels et confidentiels

---

## ğŸ“± Responsive Design

### Breakpoints
- **Mobile** : < 768px
  - Navigation hamburger
  - Tableaux en mode carte
  - Boutons et inputs agrandis (min 44-48px)
  - Layout vertical optimisÃ©
  
- **Tablette** : 768px - 1024px
  - Grille 2 colonnes
  - Navigation horizontale
  - Espacement Ã©quilibrÃ©

- **Desktop** : > 1024px
  - Grille 3-4 colonnes
  - Sidebar navigation
  - Espace maximisÃ©

### Mode Mobile OptimisÃ©
- **Tableaux responsive** avec affichage en cartes
- **Labels automatiques** pour chaque champ
- **Boutons tactiles** (min 44px pour Apple HIG)
- **Inputs agrandis** (min 44px de hauteur)
- **Zones de clic gÃ©nÃ©reuses**
- **Scroll fluide** avec momentum

---

## ğŸ¨ Personnalisation

### Couleurs (CSS Variables)
```css
:root {
    --primary: #10b981;        /* Vert Propre Eco */
    --primary-dark: #059669;   /* Vert foncÃ© */
    --primary-light: #d1fae5;  /* Vert clair */
    --secondary: #f59e0b;      /* Orange */
    --accent: #8b5cf6;         /* Violet */
    --text: #1f2937;           /* Gris foncÃ© */
    --border: #e5e7eb;         /* Gris clair */
}
```

### EmployÃ©s
Modifier dans `pointeuse.html` :
```javascript
const employees = [
    { 
        name: "PrÃ©nom",
        sheet: "URL_GOOGLE_SHEETS",
        code: "1234",
        id: "prenom"
    },
    // Ajouter d'autres employÃ©s...
];
```

### Codes d'accÃ¨s
- **EmployÃ©s** : Variable `code` dans tableau employees
- **Admin** : Fonction `validateCode()` dans dashbord.html

---

## ğŸ› DÃ©pannage

### ProblÃ¨mes courants

#### La connexion auto ne fonctionne pas
- âœ… VÃ©rifier que le profil est bien en favori (Ã©toile pleine)
- âœ… S'assurer que le code a Ã©tÃ© validÃ© avec succÃ¨s
- âœ… VÃ©rifier dans DevTools > Application > LocalStorage
- âœ… Session expire aprÃ¨s 30 jours

#### Les donnÃ©es ne se sauvegardent pas
- âœ… VÃ©rifier la connexion internet
- âœ… Console navigateur pour voir erreurs Firebase
- âœ… RÃ¨gles Firebase configurÃ©es correctement
- âœ… Cliquer sur "Enregistrer" avant de quitter

#### Le service worker ne fonctionne pas
- âœ… L'app doit Ãªtre servie en HTTPS (sauf localhost)
- âœ… Vider le cache et recharger
- âœ… VÃ©rifier les erreurs dans DevTools > Application

#### Les photos ne s'affichent pas
- âœ… VÃ©rifier les URLs ImgBB
- âœ… Connexion internet active
- âœ… CORS configurÃ© correctement

---

## ğŸ“ˆ Ã‰volutions futures

### En cours de dÃ©veloppement
- [ ] Authentification Firebase Auth
- [ ] Notifications push
- [ ] Export Excel des donnÃ©es
- [ ] Graphiques et statistiques avancÃ©es
- [ ] Mode hors ligne complet
- [ ] Synchronisation automatique

### AmÃ©liorations UX
- [ ] Dark mode
- [ ] Choix de durÃ©e de session (7/15/30 jours)
- [ ] BiomÃ©trie (empreinte/Face ID)
- [ ] Multi-langue (FR/EN)
- [ ] Tutoriel interactif

### FonctionnalitÃ©s mÃ©tier
- [ ] Planning hebdomadaire
- [ ] Gestion des congÃ©s
- [ ] Calcul automatique paie
- [ ] GÃ©olocalisation chantiers
- [ ] Scanner QR codes

---

## ğŸ‘¥ Contribution

### Comment contribuer
1. Fork le projet
2. CrÃ©er une branche (`git checkout -b feature/AmazingFeature`)
3. Commit les changements (`git commit -m 'Add AmazingFeature'`)
4. Push vers la branche (`git push origin feature/AmazingFeature`)
5. Ouvrir une Pull Request

### Guidelines
- Code propre et commentÃ©
- Respect du style existant
- Tests sur mobile et desktop
- Documentation des nouvelles fonctionnalitÃ©s

---

## ğŸ“„ Changelog

### Version 2.0.0 (Novembre 2024)

#### ğŸš€ Nouvelles fonctionnalitÃ©s
- âœ¨ Connexion automatique pour profils favoris
- âœ¨ Filtre par description sur photos chantiers
- âœ¨ Modal carrousel complÃ¨tement refondue
- âœ¨ Bouton dÃ©connexion sur page heures
- âœ¨ Messages d'alerte "Pensez Ã  enregistrer"

#### ğŸ¨ AmÃ©liorations UX
- ğŸ“± Mode mobile drastiquement amÃ©liorÃ©
- ğŸ“± Tableaux responsive avec mode carte
- ğŸ“± Boutons et inputs agrandis (44-48px)
- ğŸ¨ Modal galerie moderne et fluide
- ğŸ¨ Support navigation clavier complÃ¨te

#### ğŸ› Corrections
- âœï¸ Tous les accents corrigÃ©s (Ã©, Ã¨, Ã ...)
- ğŸ”§ IncrÃ©mentation heures passÃ©e Ã  0.25
- ğŸ”§ Tableau chantiers avec saisie manuelle
- ğŸ”§ Calcul automatique des totaux

---

## ğŸ“ Support

Pour toute question ou problÃ¨me :
- ğŸ“§ Email : support@propreeco.fr
- ğŸ› Issues : GitHub Issues
- ğŸ’¬ Chat : [Lien vers support]

---

## ğŸ“œ Licence

Ce projet est sous licence privÃ©e - Â© 2024 Propre Eco

Tous droits rÃ©servÃ©s. Utilisation commerciale interdite sans autorisation.

---

## ğŸ‘ Remerciements

- **Ã‰quipe Propre Eco** - Pour les retours et tests
- **Firebase** - Pour l'infrastructure backend
- **Font Awesome** - Pour les icÃ´nes
- **ImgBB** - Pour l'hÃ©bergement d'images
- **CommunautÃ© PWA** - Pour les bonnes pratiques

---

## ğŸ¯ Roadmap

### Q4 2024
- [x] Connexion automatique
- [x] AmÃ©lioration UX mobile
- [x] Refonte modal galerie
- [ ] Mode hors ligne

### Q1 2025
- [ ] Notifications push
- [ ] Dark mode
- [ ] Planning intÃ©grÃ©
- [ ] Export Excel

### Q2 2025
- [ ] Application native iOS/Android
- [ ] GÃ©olocalisation
- [ ] Scanner QR codes
- [ ] API REST publique

---

<div align="center">

**DÃ©veloppÃ© avec â¤ï¸ par Ashborn**

[ğŸŒ¿ Propre Eco](https://propreeco.fr) | [ğŸ“§ Contact](mailto:contact@propreeco.fr)

â­ N'oubliez pas de mettre une Ã©toile si vous aimez ce projet !

</div>